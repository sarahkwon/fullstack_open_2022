[{"F:\\fullstack_open_2022\\part2\\phonebook\\src\\index.js":"1","F:\\fullstack_open_2022\\part2\\phonebook\\src\\App.js":"2","F:\\fullstack_open_2022\\part2\\phonebook\\src\\components\\NewPersonForm.js":"3","F:\\fullstack_open_2022\\part2\\phonebook\\src\\components\\FilteredList.js":"4","F:\\fullstack_open_2022\\part2\\phonebook\\src\\components\\NameFilter.js":"5","F:\\fullstack_open_2022\\part2\\phonebook\\src\\services\\persons.js":"6","F:\\fullstack_open_2022\\part2\\phonebook\\src\\components\\Notification.js":"7"},{"size":185,"mtime":1674865658691,"results":"8","hashOfConfig":"9"},{"size":3889,"mtime":1677128157168,"results":"10","hashOfConfig":"9"},{"size":513,"mtime":1674574899246,"results":"11","hashOfConfig":"9"},{"size":659,"mtime":1674573665350,"results":"12","hashOfConfig":"9"},{"size":295,"mtime":1674448344056,"results":"13","hashOfConfig":"9"},{"size":660,"mtime":1675586614113,"results":"14","hashOfConfig":"9"},{"size":238,"mtime":1674876755432,"results":"15","hashOfConfig":"9"},{"filePath":"16","messages":"17","suppressedMessages":"18","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"19"},"1cnhbjb",{"filePath":"20","messages":"21","suppressedMessages":"22","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"23"},{"filePath":"24","messages":"25","suppressedMessages":"26","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"19"},{"filePath":"27","messages":"28","suppressedMessages":"29","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"19"},{"filePath":"30","messages":"31","suppressedMessages":"32","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"19"},{"filePath":"33","messages":"34","suppressedMessages":"35","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"19"},{"filePath":"37","messages":"38","suppressedMessages":"39","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"40","usedDeprecatedRules":"19"},"F:\\fullstack_open_2022\\part2\\phonebook\\src\\index.js",[],[],[],"F:\\fullstack_open_2022\\part2\\phonebook\\src\\App.js",["41"],[],"import { useState, useEffect } from 'react'\nimport NewPersonForm from './components/NewPersonForm.js'\nimport FilteredList from './components/FilteredList.js'\nimport NameFilter from './components/NameFilter.js'\nimport personService from './services/persons.js'\nimport Notification from './components/Notification.js'\n\nconst Header = (props) => {\n  const {title} = props;\n  return <h2>{title}</h2>\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([]) \n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(personsToAdd => {\n        setPersons(persons.concat(personsToAdd))\n      })\n  }, []) \n\n  const filteredPeople = persons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase()))\n\n  const handleNameChange = (event) => setNewName(event.target.value)\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const uniqueNames = new Set(persons.map(p => p.name))\n\n    if (uniqueNames.has(newName)) { //name already exists in phonebook\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const person = persons.filter(person => person.name === newName)\n        const personToUpdate = person[0]\n        const updatedPerson = {...personToUpdate, number: newNumber}\n        personService\n          .update(updatedPerson.id, updatedPerson)\n          .then(returnedPerson => {\n            setPersons(persons.map(person => person.id !== updatedPerson.id ? person : returnedPerson))\n            setNewName('')\n            setNewNumber('')\n            setErrorMessage(`Updated ${returnedPerson.name}`)\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n          })\n          .catch(error => {\n            setErrorMessage(`${error.response.data.error}`)\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n          })\n      }\n    } else { //new name to add \n      const personObject = {\n        name: newName,\n        number: newNumber\n      }\n      personService\n        .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n          setErrorMessage(`Added ${returnedPerson.name}`)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          console.log(error)\n          setErrorMessage(`${error.response.data.error}`)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n    }\n    \n  }\n\n  const deletePerson = (id) => {\n    personService\n      .removePerson(id)\n      .catch(error => {\n        setErrorMessage(`This person has already been removed from server`)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n    setErrorMessage(`Successfully deleted contact`)\n    setTimeout(() => {\n      setErrorMessage(null)\n    }, 5000)\n    setPersons(persons.filter(person => person.id !== id))\n  }\n\n  return (\n    <div>\n      <Header title=\"Phonebook\"/>\n      <Notification message={errorMessage}/>\n      <NameFilter \n        filter={filter} \n        setFilter={setFilter}\n      />\n      <Header title=\"add a new\"/>\n      <NewPersonForm \n        newName={newName} \n        newNumber={newNumber} \n        addPerson={addPerson} \n        handleNameChange={handleNameChange} \n        handleNumberChange={handleNumberChange}\n      />\n      <Header title=\"Numbers\"/>\n      <FilteredList filteredPeople={filteredPeople} deletePerson={deletePerson}/>\n        \n    </div>\n  )\n}\n\nexport default App","F:\\fullstack_open_2022\\part2\\phonebook\\src\\components\\NewPersonForm.js",[],[],"F:\\fullstack_open_2022\\part2\\phonebook\\src\\components\\FilteredList.js",[],[],"F:\\fullstack_open_2022\\part2\\phonebook\\src\\components\\NameFilter.js",[],[],"F:\\fullstack_open_2022\\part2\\phonebook\\src\\services\\persons.js",["42"],[],"import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst removePerson = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, removePerson }","F:\\fullstack_open_2022\\part2\\phonebook\\src\\components\\Notification.js",["43"],[],"import { useEffect } from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n\r\n  return (\r\n    <div className='error'>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification",{"ruleId":"44","severity":1,"message":"45","line":26,"column":6,"nodeType":"46","endLine":26,"endColumn":8,"suggestions":"47"},{"ruleId":"48","severity":1,"message":"49","line":24,"column":1,"nodeType":"50","endLine":24,"endColumn":56},{"ruleId":"51","severity":1,"message":"52","line":1,"column":10,"nodeType":"53","messageId":"54","endLine":1,"endColumn":19},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'persons'. Either include it or remove the dependency array. You can also do a functional update 'setPersons(p => ...)' if you only need 'persons' in the 'setPersons' call.","ArrayExpression",["55"],"import/no-anonymous-default-export","Assign object to a variable before exporting as module default","ExportDefaultDeclaration","no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar",{"desc":"56","fix":"57"},"Update the dependencies array to be: [persons]",{"range":"58","text":"59"},[807,809],"[persons]"]