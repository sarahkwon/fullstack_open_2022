{"ast":null,"code":"import _objectSpread from\"F:/fullstack_open_2022/part2/phonebook/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"F:/fullstack_open_2022/part2/phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import axios from'axios';import NewPersonForm from'./components/NewPersonForm.js';import FilteredList from'./components/FilteredList.js';import NameFilter from'./components/NameFilter.js';import personService from'./services/persons.js';import Notification from'./components/Notification.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=function Header(props){var title=props.title;return/*#__PURE__*/_jsx(\"h2\",{children:title});};var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),filter=_useState8[0],setFilter=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),errorMessage=_useState10[0],setErrorMessage=_useState10[1];useEffect(function(){personService.getAll().then(function(personsToAdd){setPersons(persons.concat(personsToAdd));});},[]);var filteredPeople=persons.filter(function(person){return person.name.toLowerCase().includes(filter.toLowerCase());});var handleNameChange=function handleNameChange(event){return setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){return setNewNumber(event.target.value);};var addPerson=function addPerson(event){event.preventDefault();var uniqueNames=new Set(persons.map(function(p){return p.name;}));if(uniqueNames.has(newName)){//name already exists in phonebook\nif(window.confirm(\"\".concat(newName,\" is already added to phonebook, replace the old number with a new one?\"))){var person=persons.filter(function(person){return person.name===newName;});var personToUpdate=person[0];var updatedPerson=_objectSpread(_objectSpread({},personToUpdate),{},{number:newNumber});personService.update(updatedPerson.id,updatedPerson).then(function(returnedPerson){setPersons(persons.map(function(person){return person.id!==updatedPerson.id?person:returnedPerson;}));setNewName('');setNewNumber('');setErrorMessage(\"Updated \".concat(returnedPerson.name));setTimeout(function(){setErrorMessage(null);},5000);}).catch(function(error){setErrorMessage(\"Information of \".concat(updatedPerson.name,\" has already been removed from server\"));setTimeout(function(){setErrorMessage(null);},5000);});}}else{//new name to add \nvar personObject={name:newName,number:newNumber};personService.create(personObject).then(function(returnedPerson){setPersons(persons.concat(returnedPerson));setNewName('');setNewNumber('');setErrorMessage(\"Added \".concat(returnedPerson.name));setTimeout(function(){setErrorMessage(null);},5000);});}};var deletePerson=function deletePerson(id){personService.removePerson(id).catch(function(error){setErrorMessage(\"This person has already been removed from server\");setTimeout(function(){setErrorMessage(null);},5000);});setErrorMessage(\"Successfully deleted contact\");setPersons(persons.filter(function(person){return person.id!==id;}));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{title:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:errorMessage}),/*#__PURE__*/_jsx(NameFilter,{filter:filter,setFilter:setFilter}),/*#__PURE__*/_jsx(Header,{title:\"add a new\"}),/*#__PURE__*/_jsx(NewPersonForm,{newName:newName,newNumber:newNumber,addPerson:addPerson,handleNameChange:handleNameChange,handleNumberChange:handleNumberChange}),/*#__PURE__*/_jsx(Header,{title:\"Numbers\"}),/*#__PURE__*/_jsx(FilteredList,{filteredPeople:filteredPeople,deletePerson:deletePerson})]});};export default App;","map":{"version":3,"names":["useState","useEffect","axios","NewPersonForm","FilteredList","NameFilter","personService","Notification","Header","props","title","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setFilter","errorMessage","setErrorMessage","getAll","then","personsToAdd","concat","filteredPeople","person","name","toLowerCase","includes","handleNameChange","event","target","value","handleNumberChange","addPerson","preventDefault","uniqueNames","Set","map","p","has","window","confirm","personToUpdate","updatedPerson","number","update","id","returnedPerson","setTimeout","catch","error","personObject","create","deletePerson","removePerson"],"sources":["F:/fullstack_open_2022/part2/phonebook/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport NewPersonForm from './components/NewPersonForm.js'\nimport FilteredList from './components/FilteredList.js'\nimport NameFilter from './components/NameFilter.js'\nimport personService from './services/persons.js'\nimport Notification from './components/Notification.js'\n\nconst Header = (props) => {\n  const {title} = props;\n  return <h2>{title}</h2>\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([]) \n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(personsToAdd => {\n        setPersons(persons.concat(personsToAdd))\n      })\n  }, []) \n\n  const filteredPeople = persons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase()))\n\n  const handleNameChange = (event) => setNewName(event.target.value)\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const uniqueNames = new Set(persons.map(p => p.name))\n\n    if (uniqueNames.has(newName)) { //name already exists in phonebook\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const person = persons.filter(person => person.name === newName)\n        const personToUpdate = person[0]\n        const updatedPerson = {...personToUpdate, number: newNumber}\n        personService\n          .update(updatedPerson.id, updatedPerson)\n          .then(returnedPerson => {\n            setPersons(persons.map(person => person.id !== updatedPerson.id ? person : returnedPerson))\n            setNewName('')\n            setNewNumber('')\n            setErrorMessage(`Updated ${returnedPerson.name}`)\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n          })\n          .catch(error => {\n            setErrorMessage(`Information of ${updatedPerson.name} has already been removed from server`)\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n          })\n      }\n    } else { //new name to add \n      const personObject = {\n        name: newName,\n        number: newNumber\n      }\n      personService\n        .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n          setErrorMessage(`Added ${returnedPerson.name}`)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n    }\n    \n  }\n\n  const deletePerson = (id) => {\n    personService\n      .removePerson(id)\n      .catch(error => {\n        setErrorMessage(`This person has already been removed from server`)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n    setErrorMessage(`Successfully deleted contact`)\n    setPersons(persons.filter(person => person.id !== id))\n  }\n\n  return (\n    <div>\n      <Header title=\"Phonebook\"/>\n      <Notification message={errorMessage}/>\n      <NameFilter \n        filter={filter} \n        setFilter={setFilter}\n      />\n      <Header title=\"add a new\"/>\n      <NewPersonForm \n        newName={newName} \n        newNumber={newNumber} \n        addPerson={addPerson} \n        handleNameChange={handleNameChange} \n        handleNumberChange={handleNumberChange}\n      />\n      <Header title=\"Numbers\"/>\n      <FilteredList filteredPeople={filteredPeople} deletePerson={deletePerson}/>\n        \n    </div>\n  )\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}