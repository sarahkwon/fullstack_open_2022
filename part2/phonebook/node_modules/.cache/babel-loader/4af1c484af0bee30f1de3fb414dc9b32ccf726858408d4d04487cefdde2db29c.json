{"ast":null,"code":"var _jsxFileName = \"F:\\\\fullstack_open_2022\\\\part2\\\\phonebook\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport NewPersonForm from './components/NewPersonForm.js';\nimport FilteredList from './components/FilteredList.js';\nimport NameFilter from './components/NameFilter.js';\nimport personService from './services/persons.js';\nimport Notification from './components/Notification.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Header = props => {\n  const {\n    title\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"h2\", {\n    children: title\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 11,\n    columnNumber: 10\n  }, this);\n};\n_c = Header;\nconst App = () => {\n  _s();\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [filter, setFilter] = useState('');\n  const [errorMessage, setErrorMessage] = useState(null);\n  useEffect(() => {\n    personService.getAll().then(personsToAdd => {\n      setPersons(persons.concat(personsToAdd));\n    });\n  }, []);\n  const filteredPeople = persons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase()));\n  const handleNameChange = event => setNewName(event.target.value);\n  const handleNumberChange = event => setNewNumber(event.target.value);\n  const addPerson = event => {\n    event.preventDefault();\n    const uniqueNames = new Set(persons.map(p => p.name));\n    if (uniqueNames.has(newName)) {\n      //name already exists in phonebook\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const person = persons.filter(person => person.name === newName);\n        const personToUpdate = person[0];\n        const updatedPerson = {\n          ...personToUpdate,\n          number: newNumber\n        };\n        personService.update(updatedPerson.id, updatedPerson).then(returnedPerson => {\n          setPersons(persons.map(person => person.id !== updatedPerson.id ? person : returnedPerson));\n          setNewName('');\n          setNewNumber('');\n          setErrorMessage(`Updated ${returnedPerson.name}`);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        }).catch(error => {\n          setErrorMessage(`Information of ${updatedPerson.name} has already been removed from server`);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n      }\n    } else {\n      //new name to add \n      const personObject = {\n        name: newName,\n        number: newNumber\n      };\n      personService.create(personObject).then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson));\n        setNewName('');\n        setNewNumber('');\n        setErrorMessage(`Added ${returnedPerson.name}`);\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 5000);\n      }).catch(error => {\n        console.log(error.response);\n        setErrorMessage(`Person validation failed: ${error.response.data.error}`);\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 5000);\n      });\n    }\n  };\n  const deletePerson = id => {\n    personService.removePerson(id).catch(error => {\n      setErrorMessage(`This person has already been removed from server`);\n      setTimeout(() => {\n        setErrorMessage(null);\n      }, 5000);\n    });\n    setErrorMessage(`Successfully deleted contact`);\n    setPersons(persons.filter(person => person.id !== id));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      title: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Notification, {\n      message: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NameFilter, {\n      filter: filter,\n      setFilter: setFilter\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Header, {\n      title: \"add a new\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NewPersonForm, {\n      newName: newName,\n      newNumber: newNumber,\n      addPerson: addPerson,\n      handleNameChange: handleNameChange,\n      handleNumberChange: handleNumberChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Header, {\n      title: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FilteredList, {\n      filteredPeople: filteredPeople,\n      deletePerson: deletePerson\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"KqfENJW9VbBq+vpC2D7EnYc1x7Y=\");\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"Header\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["useState","useEffect","axios","NewPersonForm","FilteredList","NameFilter","personService","Notification","Header","props","title","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setFilter","errorMessage","setErrorMessage","getAll","then","personsToAdd","concat","filteredPeople","person","name","toLowerCase","includes","handleNameChange","event","target","value","handleNumberChange","addPerson","preventDefault","uniqueNames","Set","map","p","has","window","confirm","personToUpdate","updatedPerson","number","update","id","returnedPerson","setTimeout","catch","error","personObject","create","console","log","response","data","deletePerson","removePerson"],"sources":["F:/fullstack_open_2022/part2/phonebook/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport NewPersonForm from './components/NewPersonForm.js'\nimport FilteredList from './components/FilteredList.js'\nimport NameFilter from './components/NameFilter.js'\nimport personService from './services/persons.js'\nimport Notification from './components/Notification.js'\n\nconst Header = (props) => {\n  const {title} = props;\n  return <h2>{title}</h2>\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([]) \n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(personsToAdd => {\n        setPersons(persons.concat(personsToAdd))\n      })\n  }, []) \n\n  const filteredPeople = persons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase()))\n\n  const handleNameChange = (event) => setNewName(event.target.value)\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const uniqueNames = new Set(persons.map(p => p.name))\n\n    if (uniqueNames.has(newName)) { //name already exists in phonebook\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const person = persons.filter(person => person.name === newName)\n        const personToUpdate = person[0]\n        const updatedPerson = {...personToUpdate, number: newNumber}\n        personService\n          .update(updatedPerson.id, updatedPerson)\n          .then(returnedPerson => {\n            setPersons(persons.map(person => person.id !== updatedPerson.id ? person : returnedPerson))\n            setNewName('')\n            setNewNumber('')\n            setErrorMessage(`Updated ${returnedPerson.name}`)\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n          })\n          .catch(error => {\n            setErrorMessage(`Information of ${updatedPerson.name} has already been removed from server`)\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n          })\n      }\n    } else { //new name to add \n      const personObject = {\n        name: newName,\n        number: newNumber\n      }\n      personService\n        .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n          setErrorMessage(`Added ${returnedPerson.name}`)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          console.log(error.response)\n          setErrorMessage(`Person validation failed: ${error.response.data.error}`)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n    }\n    \n  }\n\n  const deletePerson = (id) => {\n    personService\n      .removePerson(id)\n      .catch(error => {\n        setErrorMessage(`This person has already been removed from server`)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n    setErrorMessage(`Successfully deleted contact`)\n    setPersons(persons.filter(person => person.id !== id))\n  }\n\n  return (\n    <div>\n      <Header title=\"Phonebook\"/>\n      <Notification message={errorMessage}/>\n      <NameFilter \n        filter={filter} \n        setFilter={setFilter}\n      />\n      <Header title=\"add a new\"/>\n      <NewPersonForm \n        newName={newName} \n        newNumber={newNumber} \n        addPerson={addPerson} \n        handleNameChange={handleNameChange} \n        handleNumberChange={handleNumberChange}\n      />\n      <Header title=\"Numbers\"/>\n      <FilteredList filteredPeople={filteredPeople} deletePerson={deletePerson}/>\n        \n    </div>\n  )\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}